import"../chunks/index.CzR0xuCU.js";import{a as D,t as R}from"../chunks/disclose-version.BpRFMx16.js";import{am as lr,F as dr,an as yr,O as _r,aE as br,E as Er,aF as Tr,aG as gr,aH as Sr,k as X,aI as kr,X as Or,n as M,aJ as xr,aK as Ar,ae as Q,af as Y,a4 as $r,x as Pr,aC as Z,D as B,A as Fr,y as F,B as I,j as C,C as A,g as q,aL as Ir}from"../chunks/runtime.B--FIw-H.js";import{a as Cr,s as rr}from"../chunks/render.dakeFQ05.js";import{i as tr}from"../chunks/if.DqarFP6s.js";import{e as Lr,r as er,a as nr}from"../chunks/attributes.CcfARVJg.js";import{p as G}from"../chunks/proxy.RAusSXEn.js";import{p as Ur,i as Nr,a as Mr}from"../chunks/entry.VmopEURY.js";function ar(e,r,t){lr(()=>{var n=dr(()=>r(e,t==null?void 0:t())||{});if(t&&(n!=null&&n.update)){var a=!1,i={};yr(()=>{var o=t();_r(o),a&&br(i,o)&&(i=o,n.update(o))}),a=!0}if(n!=null&&n.destroy)return()=>n.destroy()})}const jr=()=>performance.now(),x={tick:e=>requestAnimationFrame(e),now:()=>jr(),tasks:new Set};function hr(){const e=x.now();x.tasks.forEach(r=>{r.c(e)||(x.tasks.delete(r),r.f())}),x.tasks.size!==0&&x.tick(hr)}function Wr(e){let r;return x.tasks.size===0&&x.tick(hr),{promise:new Promise(t=>{x.tasks.add(r={c:e,f:t})}),abort(){x.tasks.delete(r)}}}function H(e,r){e.dispatchEvent(new CustomEvent(r))}function Dr(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const r=e.split("-");return r.length===1?r[0]:r[0]+r.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function ir(e){const r={},t=e.split(";");for(const n of t){const[a,i]=n.split(":");if(!a||i===void 0)break;const o=Dr(a.trim());r[o]=i.trim()}return r}const qr=e=>e;function or(e,r,t,n){var a=(e&Sr)!==0,i=(e&xr)!==0,o=a&&i,f=(e&Ar)!==0,p=o?"both":a?"in":"out",d,c=r.inert,m,v;function l(){var w=$r,E=X;Q(null),Y(null);try{return d??(d=t()(r,(n==null?void 0:n())??{},{direction:p}))}finally{Q(w),Y(E)}}var s={is_global:f,in(){var w;if(r.inert=c,!a){v==null||v.abort(),(w=v==null?void 0:v.reset)==null||w.call(v);return}i||m==null||m.abort(),H(r,"introstart"),m=K(r,l(),v,1,()=>{H(r,"introend"),m==null||m.abort(),m=d=void 0})},out(w){if(!i){w==null||w(),d=void 0;return}r.inert=!0,H(r,"outrostart"),v=K(r,l(),m,0,()=>{H(r,"outroend"),w==null||w()})},stop:()=>{m==null||m.abort(),v==null||v.abort()}},u=X;if((u.transitions??(u.transitions=[])).push(s),a&&Cr){var y=f;if(!y){for(var h=u.parent;h&&h.f&Er;)for(;(h=h.parent)&&!(h.f&Tr););y=!h||(h.f&gr)!==0}y&&lr(()=>{dr(()=>s.in())})}}function K(e,r,t,n,a){var i=n===1;if(kr(r)){var o,f=!1;return Or(()=>{if(!f){var y=r({direction:i?"in":"out"});o=K(e,y,t,n,a)}}),{abort:()=>{f=!0,o==null||o.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(t==null||t.deactivate(),!(r!=null&&r.duration))return a(),{abort:M,deactivate:M,reset:M,t:()=>n};const{delay:p=0,css:d,tick:c,easing:m=qr}=r;var v=[];if(i&&t===void 0&&(c&&c(0,1),d)){var l=ir(d(0,1));v.push(l,l)}var s=()=>1-n,u=e.animate(v,{duration:p});return u.onfinish=()=>{var y=(t==null?void 0:t.t())??1-n;t==null||t.abort();var h=n-y,w=r.duration*Math.abs(h),E=[];if(w>0){if(d)for(var _=Math.ceil(w/16.666666666666668),P=0;P<=_;P+=1){var k=y+h*m(P/_),N=d(k,1-k);E.push(ir(N))}s=()=>{var W=u.currentTime;return y+h*m(W/w)},c&&Wr(()=>{if(u.playState!=="running")return!1;var W=s();return c(W,1-W),!0})}u=e.animate(E,{duration:w,fill:"forwards"}),u.onfinish=()=>{s=()=>n,c==null||c(n,1-n),a()}},{abort:()=>{u&&(u.cancel(),u.effect=null,u.onfinish=M)},deactivate:()=>{a=M},reset:()=>{n===0&&(c==null||c(1,0))},t:()=>s()}}const Hr={withStackTrace:!1},mr=(e,r,t=Hr)=>{const n=r.isOk()?{type:"Ok",value:r.value}:{type:"Err",value:r.error},a=t.withStackTrace?new Error().stack:void 0;return{data:n,message:e,stack:a}};function L(e,r,t,n){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function f(c){try{d(n.next(c))}catch(m){o(m)}}function p(c){try{d(n.throw(c))}catch(m){o(m)}}function d(c){c.done?i(c.value):a(c.value).then(f,p)}d((n=n.apply(e,[])).next())})}function sr(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function S(e){return this instanceof S?(this.v=e,this):new S(e)}function ur(e,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(e,r||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",o),a[Symbol.asyncIterator]=function(){return this},a;function o(l){return function(s){return Promise.resolve(s).then(l,m)}}function f(l,s){n[l]&&(a[l]=function(u){return new Promise(function(y,h){i.push([l,u,y,h])>1||p(l,u)})},s&&(a[l]=s(a[l])))}function p(l,s){try{d(n[l](s))}catch(u){v(i[0][3],u)}}function d(l){l.value instanceof S?Promise.resolve(l.value.v).then(c,m):v(i[0][2],l)}function c(l){p("next",l)}function m(l){p("throw",l)}function v(l,s){l(s),i.shift(),i.length&&p(i[0][0],i[0][1])}}function zr(e){var r,t;return r={},n("next"),n("throw",function(a){throw a}),n("return"),r[Symbol.iterator]=function(){return this},r;function n(a,i){r[a]=e[a]?function(o){return(t=!t)?{value:S(e[a](o)),done:!1}:i?i(o):o}:i}}function Rr(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e[Symbol.asyncIterator],t;return r?r.call(e):(e=typeof sr=="function"?sr(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(o){return new Promise(function(f,p){o=e[i](o),a(f,p,o.done,o.value)})}}function a(i,o,f,p){Promise.resolve(p).then(function(d){i({value:d,done:f})},o)}}class b{constructor(r){this._promise=r}static fromSafePromise(r){const t=r.then(n=>new O(n));return new b(t)}static fromPromise(r,t){const n=r.then(a=>new O(a)).catch(a=>new g(t(a)));return new b(n)}static fromThrowable(r,t){return(...n)=>new b(L(this,void 0,void 0,function*(){try{return new O(yield r(...n))}catch(a){return new g(t?t(a):a)}}))}static combine(r){return Br(r)}static combineWithAllErrors(r){return Gr(r)}map(r){return new b(this._promise.then(t=>L(this,void 0,void 0,function*(){return t.isErr()?new g(t.error):new O(yield r(t.value))})))}andThrough(r){return new b(this._promise.then(t=>L(this,void 0,void 0,function*(){if(t.isErr())return new g(t.error);const n=yield r(t.value);return n.isErr()?new g(n.error):new O(t.value)})))}andTee(r){return new b(this._promise.then(t=>L(this,void 0,void 0,function*(){if(t.isErr())return new g(t.error);try{yield r(t.value)}catch{}return new O(t.value)})))}mapErr(r){return new b(this._promise.then(t=>L(this,void 0,void 0,function*(){return t.isOk()?new O(t.value):new g(yield r(t.error))})))}andThen(r){return new b(this._promise.then(t=>{if(t.isErr())return new g(t.error);const n=r(t.value);return n instanceof b?n._promise:n}))}orElse(r){return new b(this._promise.then(t=>L(this,void 0,void 0,function*(){return t.isErr()?r(t.error):new O(t.value)})))}match(r,t){return this._promise.then(n=>n.match(r,t))}unwrapOr(r){return this._promise.then(t=>t.unwrapOr(r))}safeUnwrap(){return ur(this,arguments,function*(){return yield S(yield S(yield*zr(Rr(yield S(this._promise.then(t=>t.safeUnwrap()))))))})}then(r,t){return this._promise.then(r,t)}[Symbol.asyncIterator](){return ur(this,arguments,function*(){const t=yield S(this._promise);return t.isErr()&&(yield yield S(z(t.error))),yield S(t.value)})}}const z=e=>new b(Promise.resolve(new g(e)));b.fromPromise;b.fromSafePromise;b.fromThrowable;const pr=e=>{let r=$([]);for(const t of e)if(t.isErr()){r=T(t.error);break}else r.map(n=>n.push(t.value));return r},Br=e=>b.fromSafePromise(Promise.all(e)).andThen(pr),vr=e=>{let r=$([]);for(const t of e)t.isErr()&&r.isErr()?r.error.push(t.error):t.isErr()&&r.isOk()?r=T([t.error]):t.isOk()&&r.isOk()&&r.value.push(t.value);return r},Gr=e=>b.fromSafePromise(Promise.all(e)).andThen(vr);var V;(function(e){function r(a,i){return(...o)=>{try{const f=a(...o);return $(f)}catch(f){return T(i?i(f):f)}}}e.fromThrowable=r;function t(a){return pr(a)}e.combine=t;function n(a){return vr(a)}e.combineWithAllErrors=n})(V||(V={}));const $=e=>new O(e);function T(e){return new g(e)}class O{constructor(r){this.value=r}isOk(){return!0}isErr(){return!this.isOk()}map(r){return $(r(this.value))}mapErr(r){return $(this.value)}andThen(r){return r(this.value)}andThrough(r){return r(this.value).map(t=>this.value)}andTee(r){try{r(this.value)}catch{}return $(this.value)}orElse(r){return $(this.value)}asyncAndThen(r){return r(this.value)}asyncAndThrough(r){return r(this.value).map(()=>this.value)}asyncMap(r){return b.fromSafePromise(r(this.value))}unwrapOr(r){return this.value}match(r,t){return r(this.value)}safeUnwrap(){const r=this.value;return function*(){return r}()}_unsafeUnwrap(r){return this.value}_unsafeUnwrapErr(r){throw mr("Called `_unsafeUnwrapErr` on an Ok",this,r)}*[Symbol.iterator](){return this.value}}class g{constructor(r){this.error=r}isOk(){return!1}isErr(){return!this.isOk()}map(r){return T(this.error)}mapErr(r){return T(r(this.error))}andThrough(r){return T(this.error)}andTee(r){return T(this.error)}andThen(r){return T(this.error)}orElse(r){return r(this.error)}asyncAndThen(r){return z(this.error)}asyncAndThrough(r){return z(this.error)}asyncMap(r){return z(this.error)}unwrapOr(r){return r}match(r,t){return t(this.error)}safeUnwrap(){const r=this.error;return function*(){throw yield T(r),new Error("Do not use this generator out of `safeTry`")}()}_unsafeUnwrap(r){throw mr("Called `_unsafeUnwrap` on an Err",this,r)}_unsafeUnwrapErr(r){return this.error}*[Symbol.iterator](){const r=this;return yield r,r}}V.fromThrowable;const cr=async(e=1e3)=>await new Promise(r=>setTimeout(r,e)),j={todos:["sleep","eat"],all:()=>structuredClone(j.todos),add:async e=>(await cr(),!e||e===""?T({message:"todo must have a text"}):j.todos.find(r=>r===e)?T({message:"todos must be unique"}):(j.todos.push(e),$(e))),delete:async e=>{await cr(),j.todos.splice(e,1)}},Jr=()=>({todos:j.all()}),ct=Object.freeze(Object.defineProperty({__proto__:null,load:Jr},Symbol.toStringTag,{value:"Module"}));function Kr(e){const r=JSON.parse(e);return r.data&&(r.data=Ur(r.data)),r}function J(e){return HTMLElement.prototype.cloneNode.call(e)}function U(e,r=()=>{}){const t=async({action:a,result:i,reset:o=!0,invalidateAll:f=!0})=>{i.type==="success"&&(o&&HTMLFormElement.prototype.reset.call(e),f&&await Nr()),(location.origin+location.pathname===a.origin+a.pathname||i.type==="redirect"||i.type==="error")&&Mr(i)};async function n(a){var u,y,h,w,E;if(((u=a.submitter)!=null&&u.hasAttribute("formmethod")?a.submitter.formMethod:J(e).method)!=="post")return;a.preventDefault();const o=new URL((y=a.submitter)!=null&&y.hasAttribute("formaction")?a.submitter.formAction:J(e).action),f=(h=a.submitter)!=null&&h.hasAttribute("formenctype")?a.submitter.formEnctype:J(e).enctype,p=new FormData(e),d=(w=a.submitter)==null?void 0:w.getAttribute("name");d&&p.append(d,((E=a.submitter)==null?void 0:E.getAttribute("value"))??"");const c=new AbortController;let m=!1;const l=await r({action:o,cancel:()=>m=!0,controller:c,formData:p,formElement:e,submitter:a.submitter})??t;if(m)return;let s;try{const _=new Headers({accept:"application/json","x-sveltekit-action":"true"});f!=="multipart/form-data"&&_.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(f)?f:"application/x-www-form-urlencoded");const P=f==="multipart/form-data"?p:new URLSearchParams(p),k=await fetch(o,{method:"POST",headers:_,cache:"no-store",body:P,signal:c.signal});s=Kr(await k.text()),s.type==="error"&&(s.status=k.status)}catch(_){if((_==null?void 0:_.name)==="AbortError")return;s={type:"error",error:_}}l({action:o,formData:p,formElement:e,update:_=>t({action:o,result:s,reset:_==null?void 0:_.reset,invalidateAll:_==null?void 0:_.invalidateAll}),result:s})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",n),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",n)}}}function wr(e){const r=e-1;return r*r*r+1}function fr(e){const r=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return r?[parseFloat(r[1]),r[2]||"px"]:[e,"px"]}function Vr(e,{delay:r=0,duration:t=400,easing:n=wr,x:a=0,y:i=0,opacity:o=0}={}){const f=getComputedStyle(e),p=+f.opacity,d=f.transform==="none"?"":f.transform,c=p*(1-o),[m,v]=fr(a),[l,s]=fr(i);return{delay:r,duration:t,easing:n,css:(u,y)=>`
			transform: ${d} translate(${(1-u)*m}${v}, ${(1-u)*l}${s});
			opacity: ${p-c*y}`}}function Xr(e,{delay:r=0,duration:t=400,easing:n=wr,axis:a="y"}={}){const i=getComputedStyle(e),o=+i.opacity,f=a==="y"?"height":"width",p=parseFloat(i[f]),d=a==="y"?["top","bottom"]:["left","right"],c=d.map(h=>`${h[0].toUpperCase()}${h.slice(1)}`),m=parseFloat(i[`padding${c[0]}`]),v=parseFloat(i[`padding${c[1]}`]),l=parseFloat(i[`margin${c[0]}`]),s=parseFloat(i[`margin${c[1]}`]),u=parseFloat(i[`border${c[0]}Width`]),y=parseFloat(i[`border${c[1]}Width`]);return{delay:r,duration:t,easing:n,css:h=>`overflow: hidden;opacity: ${Math.min(h*20,1)*o};${f}: ${h*p}px;padding-${d[0]}: ${h*m}px;padding-${d[1]}: ${h*v}px;margin-${d[0]}: ${h*l}px;margin-${d[1]}: ${h*s}px;border-${d[0]}-width: ${h*u}px;border-${d[1]}-width: ${h*y}px;`}}var Qr=R('<p class="error"> </p>'),Yr=R('<span class="saving svelte-4h2wis">saving...</span>'),Zr=R('<li><form method="POST" action="?/delete"><input type="hidden" name="i" class="svelte-4h2wis"> <span class="svelte-4h2wis"> </span> <button type="submit" aria-label="Mark as complete" class="svelte-4h2wis">x</button></form></li>'),rt=R('<div class="centered svelte-4h2wis"><h1>todos</h1> <!> <!> <form method="POST" action="?/create"><label class="svelte-4h2wis">add a todo: <input name="text" autocomplete="off" required class="svelte-4h2wis"></label> <button type="submit" class="svelte-4h2wis">Add</button></form> <ul class="todos"></ul></div>');function ft(e,r){Pr(r,!0);let t=Z(!1),n=Z(G([]));var a=rt(),i=F(I(a),2);{var o=s=>{var u=Qr(),y=I(u,!0);A(u),B(()=>rr(y,r.form.error.message)),D(s,u)};tr(i,s=>{var u;(u=r.form)!=null&&u.error&&s(o)})}var f=F(i,2);{var p=s=>{var u=Yr();D(s,u)};tr(f,s=>{C(t)&&s(p)})}var d=F(f,2),c=I(d),m=F(I(c));er(m),A(c);var v=F(c,2);A(d),ar(d,(s,u)=>U==null?void 0:U(s,u),()=>()=>(q(t,!0),async({update:s})=>{await s(),q(t,!1)}));var l=F(d,2);Lr(l,22,()=>r.data.todos,s=>s,(s,u,y)=>{var h=Zr(),w=I(h),E=I(w);er(E);var _=F(E,2),P=I(_,!0);A(_),Ir(2),A(w),ar(w,(k,N)=>U==null?void 0:U(k,N),()=>()=>(q(n,G([...C(n),u])),async({update:k})=>{await k(),q(n,G(C(n).filter(N=>N!==u)))})),A(h),B(()=>{nr(E,C(y)),rr(P,u)}),or(1,h,()=>Vr,()=>({y:20})),or(2,h,()=>Xr),D(s,h)}),A(l),A(a),B(()=>{var s;m.disabled=C(t),nr(m,((s=r.form)==null?void 0:s.text)??""),v.disabled=C(t)}),D(e,a),Fr()}export{ft as component,ct as universal};
